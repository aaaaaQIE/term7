### 绘制梯形图的基本原则

1. 梯形图按**从上到下**，**从左到右**的顺序绘制；
2. 每个继电器为一个逻辑行，即一层阶梯。**每个逻辑行起于左母线**，终于右母线；
3. 继电器线圈与右母线直接连接，**不能在继电器线圈与右母线之间接其它元件**；
4. 在梯形图中，同一继电器的常开、常闭**触点可以多次被使用**，不受限制。但同一个继电器线圈，在程序运行中只能用（出现）一次。

# §4-1 FX系列PLC的基本逻辑指令（27条）

## 一、LD、LDI、OUT指令

* LD（Load）：常开触点与母线连接指令；
* LDI（Load Inverse）：常闭触点与母线连接指令；
* OUT（Out）：驱动线圈的输出指令。

![image-20230928162150280](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20230928162150280.png)

![image-20230928162313438](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20230928162313438.png)

1. 在用指令来表示梯形图时，其**程序步是不需要**输入的；
2. 一般情况下，**LD**（LDI）和**OUT**是**成对出现**的。如果不成对出现，则有特殊情况出现。

## 二、AND、ANI指令

* AND（And）：与指令，常开触点串联连接指令；
* ANI（And Inverse）：与非指令，常闭触点串联连接指令。

![image-20230928162503331](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20230928162503331.png)
$$
\boxed{\begin{align}
&\rm LD&&\rm X0\\
&\rm AND&&\rm M101\\
&\rm OUT&&\rm Y3\\
&\rm LD&&\rm Y3\\
&\rm ANI&&\rm X3\\
&\rm OUT&&\rm M101\\
&\rm AND&&\rm T1\\
&\rm OUT&&\rm Y5
\end{align}}
$$
在OUT指令后面，通过触点可将数据输出至其它线圈，即通过触点去驱动其它线圈，称为：**连续输出**。

![image-20230928163528815](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20230928163528815.png)

必须用多重输出MPS、MRD、MPP指令。

## 三、OR、ORI指令

* OR（OR）：常闭触点的并联连接指令
* ORI（OR Inverse）：常闭触点的并联连接指令。

![image-20230928163855735](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20230928163855735.png)

OR、ORI指令可以多次并联连接。在下面的这个梯形图中，也存在所谓的“**逻辑块**”问题。

![image-20230928164254673](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20230928164254673.png)

前面的例子是要进行逻辑“**块或**”操作，而这里将需要进行逻辑“**块与**”操作。

### 上节课重点

1. 三菱FX系列PLC的**输入**继电器和**输出继电器的编号**（也称为：地址）是怎样分配的？（八进制的）
2. 在梯形图中，有输入继电器（线圈）吗？（没有）
3. 梯形图中的触点通、断，分别对应寄存器（存储器中存储位）的什么状态？（0断开，1接通）
4. PLC中的<u>辅助继电器（M）能直接对外输出信号去驱动负载吗</u>？（不可以，只能作为中介和桥梁去驱动）
5. 断电保持辅助继电器有什么作用？（何时会用到它？）（瞬间掉电时。保证二次来电时仍有输出）
6. 定时器（T）（亦称：计时器）所定时间是怎样给出的？（使用K值赋）
7. 什么叫**通电延时**和**断电延时**？（通电延时：通电信号来的时候，延时一段时间才开始输出；断电延时：按停止的时候，输入不是马上断，过一段时间再断）如何利用定时器来实现通电延时、断电延时？
8. 使用**积分定时器**（断电保持时间继电器）时，应该注意什么？（或者说：为什么要有RST语句（命令）？）（如果没有RST语句会出现积分定时器定的时间到了之后一直有输出的情况，无法停止，除非掉电，必须用reset复位）
9. 使用**计数器**时，为什么也要有一条对应的RST语句？（和上题相同）
10. 程序跳转和子程序调用有什么区别？（或说：什么时候采用程序跳转？什么时候用子程序调用？）（程序跳转：只有两个分支，看条件成立与否走哪条分支；子程序调用：子程序可能会在运行中被多次调用，在原来的程序基础上多出一段，也就是子程序）
11. **怎样看主程序和子程序的分界**？（FEND。FEND和END之间就是子程序，FEND后面的程序就是子程序）
12. 通用数据寄存器和停电保持数据寄存器的区别是什么？（通用数据寄存器如果不存数值进去的话数据就一直保存下来，但断电就没了，停电保持数据寄存器就算断电也保存数据。HR0～HR199）
13. 梯形图绘制基本原则和**常用基本语句的使用**；（从上到下，从左到右。每个输出是一个阶梯，从左母线到右母线）
14. 什么是**连续输出**？（在OUT语句后面通过其他点的串联用于驱动其他输出）

【注意】后续课程将涉及编程，幻灯授课较快，希望大家在晚自习时，抽空能把书上相关的内容，再仔细地看看！！

## 四、ORB指令

* **ORB**（OR Block）：电路块（**逻辑块**）并联连接指令。
* **串联电路块**：两个以上的触点串联连接而成的电路。有时也称为：**触点组**

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007143310441.png" alt="image-20231007143310441" style="zoom:50%;" />

#### “块或”的编程方法

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007143432634.png" alt="image-20231007143432634" style="zoom:50%;" />

## 五、ANB指令

* **ANB**（And Block）：逻辑块串联连接指令

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007143609888.png" alt="image-20231007143609888" style="zoom:50%;" />

### “块与”的编程方法

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007143753321.png" alt="image-20231007143753321" style="zoom:50%;" />

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007144422931.png" alt="image-20231007144422931" style="zoom:50%;" />

### 编程技巧

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007144634322.png" alt="image-20231007144634322" style="zoom:50%;" />

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007145319353.png" alt="image-20231007145319353" style="zoom:50%;" />

## 六、边沿检测触发指令

* LDP/LDF、ANDP/ANDF、ORP/ORF 指令都是触点指令，这些指令的用法和LD、AND、OR相同，只是所表达的触点的功能有所不同。

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007145523409.png" alt="image-20231007145523409" style="zoom:50%;" />

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007145737869.png" alt="image-20231007145737869" style="zoom:50%;" />

## 七、栈存储器和多重输出指令

* **MPS**（Push）：**进栈**指令；
* **MRD**（Read）：**读栈**指令；
* **MPP**（Pop）：**出栈**指令。

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007150020714.png" alt="image-20231007150020714" style="zoom:50%;" />

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007150534169.png" alt="image-20231007150534169" style="zoom:50%;" />

### 注意

1. MPS、MRD、MPP这组指令的功能是将**连接点的结果存储起来**，以方便连接点后面电路的编程；
2. PLC中有11个存储运算中间结果的存储器，它们被称为：**栈存储器**。
3. 使用一次MPS命令，该时刻的运算结果就推入**栈的第一段**。当再次使用MPS时，当时的运算结果将推入栈的第一段，先推入的数据依次向栈的下一段推移。
4. **MRD**是最上段所存的最新数据的**读出**专用指令。**栈内的数据不发生下压或上移**。
5. 使用MPP指令，各数据依次向上段推移（称为：**弹出**或**出栈**）。最上段数据在读出后就从栈内消失。
6. 多重输出指令都是没有操作元件号的指令。
7. MPS与MPP必须**成对使用**。
8. 由于栈存储器仅有11个，所以MPS与MPP连续使用**次数必须少于11次**。（若多于11次，怎么办？）

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007150854478.png" alt="image-20231007150854478" style="zoom:50%;" />

### 举例

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007151133959.png" alt="image-20231007151133959" style="zoom:50%;" />

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007151508429.png" alt="image-20231007151508429" style="zoom:50%;" />

#### 一层栈电路（教材P46）

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007151716148.png" alt="image-20231007151716148" style="zoom:50%;" />

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007152130249.png" alt="image-20231007152130249" style="zoom:50%;" />

#### 二层栈电路

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007152331571.png" alt="image-20231007152331571" style="zoom:50%;" />

#### 四层栈电路

教材P47：相当于MPS和MPP嵌套。最多11层。其也可以用“连续输出”来编程。

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007152528101.png" alt="image-20231007152528101" style="zoom:50%;" />

## 八、主控与主控复位指令

* **MC**（Master Control）：主控指令或公共触点串联连接指令；
* **MCR**（Master Control Reset）：主控复位指令

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007152849676.png" alt="image-20231007152849676" style="zoom:50%;" />

### 注意

* 使用主控指令的触点称为**主控触点**，在梯形图中与一般触点相垂直。
* 在使用主控触点后，相当于母线移到主控触点的后面。
* 如果 MC 指令的输入触点断开时，**积算定时器计数器**用复位/置位指令驱动的软元件，**保持其当时的状态**；**非积算定时器**和用**OUT**驱动的元件变为**OFF**。
* **无嵌套**时，用**N0编程**；有嵌套时，N的编号次序增大。

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007153350115.png" alt="image-20231007153350115" style="zoom:50%;" />

#### 主控、主控复位指令的嵌套

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007153707909.png" alt="image-20231007153707909" style="zoom:50%;" />

## 九、置位和复位指令

* **RST**（Reset）：复位指令，使操作保持复位的指令。
* **SET**（Set）：置位指令，使操作保持的指令。

#### 说明：

1. 在任何情况下，**RST指令都优先执行**。
2. 计数器和移位寄存器处于复位状态下，不接收输入的数据。

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007155756854.png" alt="image-20231007155756854" style="zoom:50%;" />

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007160429355.png" alt="image-20231007160429355" style="zoom:50%;" />

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007160805332.png" alt="image-20231007160805332" style="zoom:50%;" />

![image-20231007162018202](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007162018202.png)

## 十、脉冲输出指令

* **PLS**：**上升沿微分输出指令**。用于将指定信号的上升沿进行微分，并将微分结果送给PLS指令后面所指的目标软元件。
* **PLF**：下降沿微分输出指令。

#### 注意

* 使用**PLS**指令，元件Y、M仅在驱动输入**接通**（上升沿触发）后的一个扫描周期内动作（置1）。
* 使用**PLF**指令，元件Y、M仅在驱动输入**断开**（下降沿触发）后的一个扫描周期内动作（置1）。
* 特殊继电器不能使用PLS或PLF的操作元件。
* 在驱动输入接通时，PLC由运行→停机→运行，此时PLS M0动作，但**PLS M600（断电后由电池后备的辅助继电器）不动作**。这是因为M600是保持继电器，即使在断电停机时，其动作也能保持。

## 十一、空操作指令与结束指令

* **NOP**（Non Processing）：空操作指令。
  1. 用户存储器清零后，用户存贮器内容全部变为NOP（零）；
  2. 主要用于短路电路、改变电路功能及调试程序时用；
  3. 程序如果加入NOP，改动或追加程序时，可以减少序号的改动。另外，**用NOP指令替换已写入的指令，也可改变电路**；
* **END**（End）：结束指令，表示程序结束。
  1. 若在程序最后写入END，则END以后的程序将不再执行。
  2. **按段插入END**，可以**顺序扩大对各程序段的检查**，方便调试程序。

#### 注意：P54

在一个比较大的程序里，如果想删除掉某一语句，又怕以后可能还要改回来，就可以**将要删除的语句用NOP来替换**。否则，一旦删除后，可能就不容易找到在什么位置删除了语句。

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231007163639618.png" alt="image-20231007163639618" style="zoom:50%;" />

### 上节课重点

1. 什么叫“块”？（触点组）什么是“**块与**”和“**块或**”操作？（触点组的并联/串联）
2. LD/LDI～OUT一般是配对的。在何情况下，OUT数量会多于LD/LDI？（有连续输出的时候）何情况下，LD/LDI数量又会多于OUT？（有块操作的时候）
3. 边沿检测触发指令有哪几个？（起点的LDP/LDE、与操作的ANDP/ANDF、或操作的ORP/ORF），其引起的输出接通时间有多长？（一个扫描周期）
4. 有时为了避免“块”操作，**对触点多、触点少应如何处理**？（放在前面或者上面）
5. 栈存储器和多重输出指令（MPS-MRD-MPP）的使用。
6. 主控与主控复位指令（MC-MCR）的使用及其执行过程；（主母线可能会断开）
7. 置位和复位指令（SET-RST）的使用（**会画出时序图**），**SET Y0和OUT Y0两条语句的区别**是什么？
8. 如果在梯形图中，出现SET指令，那么可以没有RST指令吗？（语法上没有问题，但是不能停止）**SET和RST优先级哪个高**？（RST高）
9. 脉冲输出指令包括哪两个？有什么区别？（上升沿PLS和下降沿PLF微分输出指令），其输出接通的时间有多长？（一个扫描周期）
10. NOP空操作指令的作用是什么？（1把所有的存储器清零；2当把某一个语句改成NOP后，会改变梯形图的控制功能）
11. 在梯形图中，可以出现多个END语句吗？（可以，但有效的只有第一个）什么时候会出现多个END语句？（在程序分段进行调试的时候）
12. 在梯形图中，可以出现**双线圈**和**桥式电路**吗？（双线圈是不允许的，双线圈前面的触点并联一下就可以；桥式电路，出现能流，一定要把路径打开来）如何处理线圈和桥式电路？

# §4-2 基本电路与梯形图设计方法

## 一、启动、保持和停止电路（启保停——启停控制)

![image-20231012141506254](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012141506254.png)

#### 【注意】

**启停控制电路是最基本的电路**。对于**初学者**来说，大多控制程序都是通过在启停控制程序的基础上逐渐添加相关触点发展而来！（千万要记住这个技巧）

## 二、三相异步电动机正反转控制电路

热继电器FR个数跟着电动机个数走！

![image-20231012141844349](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012141844349.png)

![image-20231012143250532](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012143250532.png)

![image-20231012143404198](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012143404198.png)

### 2、正反转控制梯形图

![image-20231012143800163](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012143800163.png)

![image-20231012143549917](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012143549917.png)

![image-20231012144344620](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012144344620.png)

### 3、常闭触点输入信号的处理

启停控制

![image-20231012144845592](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012144845592.png)

改成常闭按钮的话，再按启动按钮，电机无法启动。

![image-20231012145526467](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012145526467.png)

## 三、定时器和计数器的应用程序

定时范围的扩展

![image-20231012145627993](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012145627993.png)

![image-20231012150035054](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012150035054.png)

**自复位定时器**：用定时器自身的触点把自己断掉。

**「问」**

<img src="4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012150443355.png" alt="image-20231012150443355" style="zoom:50%;" />

【小结】怎样设计梯形图？

1. 从启停控制梯形图开始；
2. 再看启动的有哪些？停止的又有哪些？把相应的启动和停止的部分加入进去即可。

![image-20231012150735098](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012150735098.png)

要求：按下停止按钮，延时0.6s后停车！

![image-20231012151001688](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012151001688.png)

![image-20231012151202711](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012151202711.png)

再看启动的有哪些？停止的又有哪些？把相应的启动和停止的部分加入进去即可。

![image-20231012151259922](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012151259922.png)

**「思考题」**如果按启动按钮，过10s后再起动；按停止按钮，5s后再停止，梯形图怎样改动？

![image-20231012151712074](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012151712074.png)

### 闪烁电路（书上没有）

![image-20231012152138137](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012152138137.png)

T1作动时间应该为一个扫描周期。

### 接通/断开延时电路（书上没有）

![image-20231012152604252](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012152604252.png)

T1动作最短处为一个扫描周期。

# 作业

请写出下列各题的**I/O地址表**，设计相应控制功能的**梯形图**，并写出相应的**指令表**。

1. 控制一台电动机启停。如何实现按启动按钮，过10s后电动机才启动；按停止按钮，5s后才停止。
2. 控制一台电机，要求既可点动，又可以长动，请设计其控制梯形图。
3. 设计用**一套启停按钮**控制两台电动机M01和M02运行梯形图。控制要求：M01启动后，延时 1min后M02启动，同时M01停止；M02启动运行2min后自动停车。
   * （1）如果控制要求改成：M01启动后，延时1min后M02启动；M02启动运行2min后，M01和M02同时停车，梯形图将如何改动？
   * （2）如果**要求M01、M02具有独立启停功能**，梯形图又将如何改动？

![image-20231012153839364](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012153839364.png)

## 四、其它编程案例

教材P57

### 优先（抢答）电路

![image-20231012160440165](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012160440165.png)

输入信号X0（A）或输入信号X1（B）中**先到**者将取得**优先**权，而后者无效。

【问】这个梯形图有问题吗？（缺复位按钮）

### 译码电路

#### 真值表

$$
\begin{array}{c|c}
\hline X0\quad X1&Y0\quad Y1\quad Y2\quad Y3\\
\hline1\qquad1&1\qquad0\qquad0\qquad0\\
\hline0\qquad0&0\qquad1\qquad0\qquad0\\
\hline0\qquad1&0\qquad0\qquad1\qquad0\\
\hline1\qquad0&0\qquad0\qquad0\qquad1\\\hline
\end{array}
$$

![image-20231012161203419](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012161203419.png)

#### 真正的真值表

$$
\begin{array}{c|c}
\hline X0\quad X1&Y0\quad Y1\quad Y2\quad Y3\\
\hline0\qquad0&1\qquad0\qquad0\qquad0\\
\hline0\qquad1&0\qquad1\qquad0\qquad0\\
\hline1\qquad0&0\qquad0\qquad1\qquad0\\
\hline1\qquad1&0\qquad0\qquad0\qquad1\\\hline
\end{array}
$$

### 二分频电路

该电路可以实现对输入信号的二分频，输出**Y0**是输入**X0**的**二分频**。

![image-20231012161716148](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012161716148.png)

### 振荡电路

当X0闭合后，下面的三种振荡电路均产生周期为3s的振荡信号。

#### 「例1」

利用**自复位定时器的一种变形**来实现的。

![image-20231012161954790](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012161954790.png)

#### 「例2」

![image-20231012162156460](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012162156460.png)

这种振荡程序，在实际上用的很少。因为从宏观上说，Y0似乎一直是有输出的。

#### 「例3」

![image-20231012162723350](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012162723350.png)

# §4-3 梯形图的经验设计方法

在一些典型电路的基础上，根据被控对象对控制系统的具体要求，不断修改和完善梯形图，多次反复调试和修改梯形图的设计方法。

#### 特点

1. 具有试探性和**随意性**；
2. 最后的**结果不是唯一的**；
3. 设计所用的时间和质量因**设计者的经验**而异。

## 设计实例一

送料小车在限位开关X4处**装料**，10s后结束然后右行；碰到X3后停下来**卸料**，15s后左行，碰到X4后，又停下来装料，这样不停地循环工作，直到按下停机按钮。

#### 【注意】

1. 输入有哪几个？（行程开关X3和X4；还有呢？启动一个,
   停止一个？行了吗？）
2. 输出有哪几个？定时器呢？

![image-20231012163013204](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012163013204.png)

![image-20231012163258939](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012163258939.png)

## 设计实例二

![image-20231012163544781](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012163544781.png)

![image-20231012164044326](4.PLC%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231012164044326.png)