# §3-1 FX系列可编程序控制器

## 一、概述

### TX系列PLC特点

* 是当前国内外最新、最具特色、最具代表性的微型PLC。
* 既可**指令表**编程，又可**梯形图**、SFC**顺序功能图**（或称状态转移图）编程。
* 设置了**高速计数器**，可对来自特定的输入继电器的高频脉冲进行中断处理。
* 除具有数据传送与比较、四则运算与逻辑运算等应用指令系统，还具有输入/输出刷新、中断和**高速处理**指令。
* 对特殊控制方面，不仅具备**模拟量输入输出**控制，而且具有**定位控制**及**PID**系统控制。
* 能方便地与计算机链接，进行**通信**，实现数据交换与管理。

## 二、FX系列PLC型号的含义

$$
FX_{[系列序号]}-[I/O总点数][单元类型][输出形式][特殊品种的区别]
$$

#### 系列序号

0、0S、0N、1、2、2C、1S、1N、2N、2NC

#### I/O总点数

14～256

#### 单元类型

* M——基本单元；
* E——输入输出混合扩展单元及扩展模块；
* EX——输入专用扩展模块；
* EY——输出专用扩展模块。

#### 输出形式

* R——继电器输出；
* T——晶体管输出；
* S——晶闸管输出。

#### 特殊品种的区别

* D——DC电源，DC输入；
* A1——AC电源，AC输入；
* H——大电流输出扩展模块（1A/1点）；
* V——立式端子排的扩展模块；
* C——接插口输入输出方式；
* P——输入滤波器1ms的扩展模块；
* L——TTL输入型扩展模块；
* S——独立端子（无公共端）扩展模块。

例： $\rm FX_{1N}-40MR$ 

## 三、FX系列PLC的家族

* 基本单元（主机）有 $\rm FX_0$ 、 $\rm FX_{0S}$ 、 $\rm FX_{0N}$ 、 $\rm FX_{1}$ 、 $\rm FX_2$ 、 $\rm FX_{2C}$ 、 $\rm FX_{1S}$ 、 $\rm FX_{1N}$ 、 $\rm FX_{2N}$ 、 $\rm FX_{2NC}$ 等9个系列。
* 每个系列又有12、16、32、**40**、48、64、80、128点等不同输入/输出点数的机型。
* 还提供**扩展单元与扩展模块**。扩展单元与扩展模块同样具有输出形式的不同和输入输出点数的变化。
* 每个系列还有**继电器输出**、晶体管输出、晶闸管输出三种输出形式。

## 四、主要性能指标

### 1、硬件指标

* 硬件指标包括一般指标、输入特性和输出特性；
* PLC对环境要求很低，能适应工业现场的恶劣条件。

### 2、软件指标

* 软件指标包括运行方式、速度、程序容量、**元件种类和数量**、**指令类型**等；
* **机型不同其软件指标相差非常悬殊**。这项指标的高低反映可编程控制器的运算规模；
* PLC各种运算功能都是由**指令的种类**和功能决定的。

## 五、编程器

### 1、简易编程器

* 功能：输入和编辑指令表程序；
* 特点：体积很小，价格便宜。

### 2、图形编程器

* 功能：直接生成和编辑梯形图程序；
* 特点：价格高，操作比较麻烦。

## 六、个人计算机程序开发系统

也叫**组态软件**

### 1、功能

* **编制**、**修改**PLC的梯形图**程序**；
* **监视**系统运行，打印、采集和分析数据；
* 适时彩色图形操作器和文字处理器；
* 对工业现场和系统**仿真**；
* **网络**管理器和网络工作站；

### 2、特点

* 可以利用现有的**计算机软件和网络资源**；
* **功能强大**。

# §3-2 FX系PLC的编程软元件

## 一、数据结构与软元件

### 1、数据结构

#### （1）十进制数（字数据）

* 定时器和计教器的设定值K；
* 辅助继电器、定时器、计数器、状态继电器等的编号；
* 定时器和计数器当前值等。

#### （2）二进制数（位数据）

* 十、八、十六进制数、BCD码在PLC内部均以二进制数形态存在；
* 使用外围设备进行系统运行监控显示时，会还原成原来的数制。
* 各类继电器、定时器、计数器的触点及线圈。

#### （3）八进制数

输入继电器：输出继电器的地址编号采用八进制。

#### （4）十六进制数

指定应用指令中的操作数或指定动作。

#### （5）BCD码

* 十进制数以BCD码的形态出现；
* 常用于BCD输出形式的数字式开关或七段码显示器控制等方面。

#### （6）常数 K、H

* 十进制常数K是定时器、计数器的设定值；
* 十进制常数K与十六进制常数H也是应用指令的操作数。

### 2、软元件和软继电器

* PLC的**输入输出端子**及内部存储器的**每一个存储单元**均称为**软元件**，简称元件。
* **各个元件**与PLC的监控程序、用户的应用程序合作，会产生或模拟出**不同的功能**。
* 当元件产生的是继电器功能时，称这类元件为**软继电器**，简称继电器。它**不是**物理意义上的**实物继电器**，而是一定的存储单元与程序的结合产物。后述的各类<u>继电器、定时器、计数器、指针均为此类软元件</u>。
* **元件的数量及类别**是由PLC监控程序规定的，它的规模决定着PLC整体功能及数处理能力。

## 二、输入继电器（X）

### 注意

* 输入继电器是PLC内部**虚拟**继电器。它不是物理意义上的实物继电器；
* 在PLC内部**与输入端子相连**；
* 有无数个与之相对应的常开触点和常闭触点。这些动合、动断**触点可在PLC编程时随意使用**；
* 这种输入继电器**不能用程序驱动**，只能由输入信号驱动。

输入继电器是PLC接收外部输入的开关量的窗口。PLC通过光电耦合器**将外部输入的开关量信号读入并存储在输入映像寄存器内**。

#### 外部触点接通时

* 对应的寄存器为“1”状态
* 常开触点闭合，常闭触点断开

#### 外部触点断开时

* 对应的寄存器为“0”状态
* 常开触点断开，常闭触点闭合

### 注意

* **输入继电器**在梯形图里是**没有线圈**的；
* 输入继电器状态取决于外部输入信号的状态。

## 三、输出继电器（Y）

* 输出继电器是将PLC的输出信号传递给输出模块；
* 由输出模块**驱动外部负载**工作。

### $\rm FX_{2N}$ 系列PLC输入输出继电器元件号

| 型号               | 输入          | 输出          |
| ------------------ | ------------- | ------------- |
| $\rm FX_{2N}-16M$  | X0-X7 8点     | Y0-Y7 8点     |
| $\rm FX_{2N}-32M$  | X0-X17 16点   | Y0-Y17 16点   |
| $\rm FX_{2N}-48M$  | X0-X27 24点   | Y0-Y27 24点   |
| $\rm FX_{2N}-64M$  | X0-X37 32点   | Y0-Y37 32点   |
| $\rm FX_{2N}-80M$  | X0-X47 40点   | Y0-Y47 40点   |
| $\rm FX_{2N}-128M$ | X0-X77 64点   | Y0-Y77 64点   |
| 扩展时             | X0-X267 184点 | Y0-Y267 184点 |

## 四、辅助继电器（M）

* 辅助继电器是用**软件实现**的；
* 它们**不能**直接对外输出信号去**驱动负载**；
* 相当于继电器控制系统中的**中间继电器**。
  * 通用：500点（M0～M499）无断电保持功能
  * 断电保持：524点（M500～M1023）有断电保持功能（一个扫描周期的导通）（参见教材P25：例图3-3）
  * 特殊用：256点（M8000～M8255）
    1. 运行监视（M8000）：当PLC运行时，M8000接通；PLC停止运时，M8000断开。
    2. 初始化脉冲（M8002）：在M8000由OFF变为ON状态时的一个扫描周期ON。
    3. 时钟脉冲（M8011～M8014）：M8011~M8014分别是10ms、100ms、1s和1min时钟脉冲。
    4. 锂电池电压降低（M8005）：电池电压下降至规定值时M8005变为ON。

## 五、内部状态继电器（S）

内部**状态**继电器是用于编制**顺序控制**程序的一种编程元件。
$$
\begin{align}
初始状态&&&\rm S0～S9&10点\\
返回原点&&&\rm S10～S19&10点\\
通用状态&&&\rm S20～S499&480点\\
保持状态&&&\rm S500～S899&400点\\
报警器用&&&\rm S900～S999&100点
\end{align}
$$

#### 注意

* S0～S499：没有断电保持功能；
* S500～S899：有断电保持功能。 

## 六、定时器（T）

### 1、通用定时器

#### 100ms定时器

* T0～T199
* 定时范围为0.1～3276.7s （其中T192~T199为子程序和中断服务程序专用的定时器）

#### 10ms定时器

* T200～T245
* 定时范围为0.1～327.67s

#### 注意

**通用定时器没有保持功能**，在输入电路断路或停电时复位。

* 输入信号**接通**后**延时**动作——称为：**通电延时** 
  * 注意：T40是定时100ms（即0.1s）
* 输入信号**断开**后**延时**动作——称为：**断电延时**

### 2、积分定时器

教材上称为：积算定时器

#### 1ms定时器

* T246～T249
* 定时范围为0.001～32.767s

#### 100ms定时器

* T250～T255
* 定时范围为0.1～3276.7s

#### 注意

**积分定时器具有断电保持功能**；断电后再次通电，计数器继续定时。

必须要有复位语句，复位X2断开之后才能停止输出。

## 七、计数器（C）

$$
\begin{cases}
内部计数器
	\begin{cases}
	16位加计数器\\
	32位加/减计数器
	\end{cases}\\
高速计数器
\end{cases}
$$

#### 增计数

* 一般用：100点（16bit）C0～C99
* 锁存用：100点（16bit）C100～C199

#### 增减计数用

* 一般用：20点（32bit）C200～C219 
* 锁存用：15点（32hit）C220～C234

#### 高速用

* 一相60KHz 4点，二相30KHz 1点，5KHz 1点

根据本课程要求，只要求掌握16位计数器

X11不是按钮，是光电开关。

## 八、内部指针（P/I）

$$
\begin{cases}
\rm 分支用指针(P)
	\begin{cases}
	跳转用指针\\
	子程序调用指针
	\end{cases}\\
\rm 中断用指针(I)
\end{cases}
$$

根据本课程要求，只要求掌握分支用指针

分支用 P0～P127 128点

### 分支指令用指针

* **分支指令**用指针在应用时，要与相应的应指令FNC00（CJ）、FNC01 （CALL）、FNC06 （FEND）、FNC02（SRET）及END配合使用，**完成程序**执行流向的**跳转**、**调用子程序**、结束等；
* 分支指令用指针是为了给上述的这些应用指令提供**跳转地址**（目标）或称**跳转标号**。其中**P63**较特殊，它是直接跳转到END指令的指针；
* P0～P62、P64～P127，共127点；
* P63用于结束跳转到END位置，故**不能使用P63作标志**。

## 九、数据寄存器（D）

* PLC用于**模拟量**控制、**位置量**控制、**数据**I/O时，需要许多**数据寄存器存储参数**及工作数据。
* 这类寄存器数量随机型的不同而不同。 较简单的只能进行**逻辑控制**的机器**没有此类寄存器**，而高档机中，可达数千个。
* 每一个数据寄存器都是**16位**（最高位为符号位）；
* 可以用**两个数据寄存器**，合并起来存放32位数据（最高位为符号位）。

### 1、通用数据寄存器

* D0～D199（200点）；
* 只要**不写入**其他数据，则**已写入的数据不会变化**。
* PLC状态由**运行（RUN）→停止（STOP）**时，通用数据寄存器全部数据均**清零**。
* 若将特殊辅助继电器**M8033**置1，在PLC由RUN转为STOP时，数据可以保持。

### 2、停电保持数据寄存器

* D200～D511（312点）；
* **除非改写**，否则原有数据不会丢失；
* 不论电源**接通与否**，PLC运行与否，其内容也**不变化**。
* 在两台PLC作点对点的**通信**时，**D490～D509**被用作通信操作。

### 3、特殊数据寄存器

* D8000～D8255（256点）；
* 这些数据寄存器供**监控PLC**中各种元件的**运行**方式之用；
* 寄存器的内容在电源**接通**（ON）时，**写入初始化值**（全部先清零，然后由系统ROM安排写入初始值）。

【例】D8000所存放警戒监视时钟（watchdog timer）的时间是由系统ROM设定的。要改变时，用传送指令将目的时间送入D8000。该值在运行(RUN)→停止(STOP)时，保持不变。

* **没有定义**的特殊数据寄存器，请用户**不要使用**。

### 4、文件寄存器

* D1000～D2999（2000点）；

* 文件寄存器实际上是一类**专用**数据寄存器，用于**存储大量的数据**；

  例如：采集数据、统计计算数据、多组控制参数等

* 其**数量**由CPU的监控软件决定，但可以通过扩充存储卡的方法加以**扩充**。

* 文件寄存器是要**占用用户程序存储器**（RAM、EEPROM、EPROM）内的一个存储区，以500点为一个单位，最多可在参数设置时设置2000点，用**编程器**可进行**写入**操作。

#### 注意

* 在PLC运行中，可用**BMOV**指令将文件寄存器中的**数据读到通用数据寄存器**中去，但不能用指令将数据写入文件寄存器。
* 在数据寄存器中如果存放**32位**数据且**指定了低位**（例如：D0），则**高位**为继其之后的编号（例如：D1）**被自动占有**。

## 十、常数（K、H）

$$
\rm PLC使用的常数
\begin{cases}
十进制常数\rm\ K\\
十六进制常数\rm\ H
\end{cases}
$$

常数一般用于

* 定时器或计数器的设定值和当前值；
* 应用指令的操作数。

