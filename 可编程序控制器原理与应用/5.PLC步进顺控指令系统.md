# §5-1 梯形图的顺序控制设计法

## 一、用经验设计法设计梯形图存在的问题

### 经验设计法

![image-20231019151607153](5.PLC%E6%AD%A5%E8%BF%9B%E9%A1%BA%E6%8E%A7%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231019151607153.png)

1. 设计方法很难掌握，设计周期长；
2. 装置交付使用后维修困难。（相对而言，要看编程者熟练程度）

### 另类法

![image-20231019151655818](5.PLC%E6%AD%A5%E8%BF%9B%E9%A1%BA%E6%8E%A7%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231019151655818.png)

### 第三种方法

就是本章要介绍的：**顺序控制**设计方法！

## 二、顺序控制设计法的基本思想

#### 步（状态）STEP

将系统的一个工作周期或一个控制过程划分成若于个顺序相连的阶段，这些阶段称为：**步（状态）**

#### 转换

1. 状态与状态之间由**转换分隔**；
2. 相邻的状态具有不同的动作。

#### 转换条件

1. 使系统由前级步进入下一步的信号称为：**转换条件**。
2. 当相邻两状态之间的转换条件满足时，就实现转换。

#### 有向线段

#### 动作或命令

每一步所完成的工作

# §5-2 顺序控制设计中的功能表图

## 一、概述

**功能表图**（Function Chart），也称为：**状态转移图**或**顺序功能图**，它是描述控制系统的控制过程、功能和特性的一种图形。

状态转移图具有直观、简单的特点，是设计PLC顺序控制程序的一种工具。

![image-20231019152111754](5.PLC%E6%AD%A5%E8%BF%9B%E9%A1%BA%E6%8E%A7%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231019152111754.png)
$$
内部状态继电器
$$

## 二、状态转移图的绘制

1. **状态器用框图表示**，框内是状态器元件号；
2. 状态器之间用**有向线段**连接；
3. 其中从上到下、从左到右**箭头可以省去不画**；
4. 有向线段上的垂直短线和它旁边标注的文字符号或逻辑表达式表示**状态转移条件**，旁边的线圈等是**输出信号**。

Y1和Y2输出的不同：（1）Y1是用OUT指令驱动；（2）Y2是用SET指令置位，未复位前Y2一直保持接通。

1. 状态器**S20有效时**，输出Y1、Y2接通；
2. 程序等待转换条件X1动作；
3. 当X1一接通，状态就由S20转到S21，这时Y1断开，Y3接通，**Y2仍保持接通**。

### 举例

![image-20231019152600754](5.PLC%E6%AD%A5%E8%BF%9B%E9%A1%BA%E6%8E%A7%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231019152600754.png)

1. 机械手将工件从A点向B点移送；（教材P64）。
2. 机械手的上升、下降与左移、右移都是由**双线圈两位电磁阀驱动气缸**来实现的。抓手对物件的松开、夹紧是由二个**单线圈**两位电磁阀驱动气缸完成，只有在电磁阀通电时抓手才能夹紧；
3. 该**机械手工作原点在左上方**，按下降、夹紧、上升、右移、下降、松开、上升、左移的顺序依次运行。

S2为**初始**状态，用**双线框**表示。当辅助继电器M8041、M8044接通时,状态从S2向S20转移，下降输出Y0动作。

![image-20231019153258980](5.PLC%E6%AD%A5%E8%BF%9B%E9%A1%BA%E6%8E%A7%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231019153258980.png)

### 举例

![image-20231019161247152](5.PLC%E6%AD%A5%E8%BF%9B%E9%A1%BA%E6%8E%A7%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231019161247152.png)

M8002在PLC刚启动时导通一个扫描周期

## 三、状态转移图的基本结构

![image-20231019162023202](5.PLC%E6%AD%A5%E8%BF%9B%E9%A1%BA%E6%8E%A7%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231019162023202.png)

![image-20231019162214059](5.PLC%E6%AD%A5%E8%BF%9B%E9%A1%BA%E6%8E%A7%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231019162214059.png)

![image-20231019162415287](5.PLC%E6%AD%A5%E8%BF%9B%E9%A1%BA%E6%8E%A7%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231019162415287.png)

### 举例

![image-20231019162804079](5.PLC%E6%AD%A5%E8%BF%9B%E9%A1%BA%E6%8E%A7%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231019162804079.png)

这是一个**三工位**钻床的工作台的俯视图

三个工位分别完成：

1. 送料（装工件）；
2. 钻孔；
3. 合格品检测，卸工件。

![image-20231019162615762](5.PLC%E6%AD%A5%E8%BF%9B%E9%A1%BA%E6%8E%A7%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231019162615762.png)

## 四、状态转移图中转换实现的基本原则

功能表图中表示**活动状态的进展是由转换实现来完成的**。

### 1、转换实现的条件

1. 该转换的前级步是**活动步**；
2. 相应的转换条件得到满足。

### 2、转换实现应完成的操作

1. 将有向线段与相应转换符号相连的**后续步都变成活动步**；
2. 将有向线段与相应转换符号相连的**前级步都变成不活动步**。

## 五、状态转移图的特点

1. **两个步**绝对不能直接相连，必须用一个**转换**将它们**隔开**；
2. **两个转换**也不能直接相连，必须用一个**步**将它们**隔开**；
3. 功能表中的**初始步**一般对应于系统等待**启动的初始状态**，它是必不可少的；
4. 自控系统应能**多次重复执行**同一工艺过程，因此功能表图中应该是一个由有向线段组成的**闭环**；
5. 如果用**没有断电保持**功能的编程元件代表各步，PLC在开始进入RUN工作方式时，它们均处于断开状态，所以**必须用M8002**（特殊辅助继电器（初始脉冲））**的常开触点作为转换条件**，将初始步预置为活动步。

# §5-3 顺序控制梯形图的编程方式

## 一、使用启保停电路的编程方式

### 编程模型

![image-20231019163637363](5.PLC%E6%AD%A5%E8%BF%9B%E9%A1%BA%E6%8E%A7%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231019163637363.png)

![image-20231019163755329](5.PLC%E6%AD%A5%E8%BF%9B%E9%A1%BA%E6%8E%A7%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231019163755329.png)

## 二、以转换为中心的编程方式

### 编程模型

![image-20231019164045824](5.PLC%E6%AD%A5%E8%BF%9B%E9%A1%BA%E6%8E%A7%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F.assets/image-20231019164045824.png)